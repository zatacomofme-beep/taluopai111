import { router } from '@kit.ArkUI';

@Component
export struct BottomNavBar {
  @Prop current: string = 'index'; // index | breathing | mood

  @Builder
  NavItem(key: string, icon: string, label: string, targetUrl: string) {
    Column() {
      // å›¾æ ‡å®¹å™¨
      Stack() {
        if (this.current === key) {
          // é€‰ä¸­æ€çš„å…‰æ™•èƒŒæ™¯
          Circle({ width: 40, height: 40 })
            .fill('rgba(255, 105, 180, 0.15)')
            .scale({ x: 1, y: 1 })
            .animation({ duration: 300, curve: Curve.EaseOut })
        }
        Text(icon)
          .fontSize(24)
          .scale(this.current === key ? { x: 1.1, y: 1.1 } : { x: 1, y: 1 })
          // ğŸ› ï¸ ä¿®å¤ï¼šCurve.Spring ä¸å­˜åœ¨ï¼Œæ”¹ä¸º Curve.Smooth
          .animation({ duration: 300, curve: Curve.Smooth })
      }
      .width(40)
      .height(40)

      // æ–‡å­—æ ‡ç­¾
      Text(label)
        .fontSize(10)
        .fontColor(this.current === key ? '#FF69B4' : '#999999')
        .margin({ top: 4 })
        .fontWeight(this.current === key ? FontWeight.Medium : FontWeight.Normal)
    }
    .layoutWeight(1)
    .justifyContent(FlexAlign.Center)
    .onClick(() => {
      if (this.current !== key) {
        router.replaceUrl({ url: targetUrl });
      }
    })
  }

  build() {
    Row() {
      this.NavItem('index', 'ğŸ”®', 'ä»Šæ—¥æŒ‡å¼•', 'pages/Index')
      this.NavItem('breathing', 'ğŸŒ¬ï¸', 'å‘¼å¸å†¥æƒ³', 'pages/BreathingPage')
      this.NavItem('mood', 'ğŸ“', 'å¿ƒæƒ…æ—¥è®°', 'pages/MoodPage')
    }
    .width('90%')
    .height(70)
    .backgroundColor('rgba(255, 255, 255, 0.85)') // åŠé€æ˜ç™½
    .backdropBlur(20) // æ¯›ç»ç’ƒæ¨¡ç³Š
    .borderRadius(35) // èƒ¶å›Šåœ†è§’
    .shadow({ radius: 30, color: 'rgba(0,0,0,0.08)', offsetY: 10 }) // æŸ”å’Œé˜´å½±
    .padding({ left: 10, right: 10 })
    .margin({ bottom: 20 }) // æ‚¬æµ®è·ç¦»åº•éƒ¨
  }
}